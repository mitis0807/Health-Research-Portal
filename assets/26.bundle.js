(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddAnnouncement=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),s=d(r),l=n(21),i=n(36),u=d(n(29)),c=d(n(197)),p=d(n(46));function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(37);var b=l.Form.Item,g=l.Input.TextArea,y=t.AddAnnouncement=function(e){function t(){var e,n,a;f(this,t);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={announcementTitle:"",announcementDescription:"",disableSubmit:!1},a.handleCancel_EditAnnouncement=function(){console.log("on cancel click of edit announ"),a.props.history.push("/manageAnnouncement")},a.handleSubmit_AddAnnouncement=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){console.log("error********",e),console.log("value********",t),e||(a.setState({disableSubmit:!0}),fetch(u.default.APIURL+"/announcements",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({data:{title:a.state.announcementTitle,content:a.state.announcementDescription}})}).then((function(e){return e.json()})).then((function(e){200===e.status?(a.setState({announcementData:e.announcementData,disableSubmit:!1}),i.toast.success(e.message,{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),a.props.history.push("/manageAnnouncement")):300===e.status?(a.setState({disableSubmit:!1}),i.toast.error(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1})):401===e.status?(error({title:p.default.SessionExpired+e.message,content:"",onOk:function(){that.props.history.push("/signIn")}}),a.setState({disableSubmit:!1})):500===e.status?(i.toast.error(p.default.Error,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),a.setState({disableSubmit:!1}),a.props.history.push("/serverError")):400===e.status?(i.toast.error(p.default.Error,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),a.setState({disableSubmit:!1}),a.props.history.push("/badRequest")):403===e.status&&(i.toast.error(p.default.Error,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),a.setState({disableSubmit:!1}),a.props.history.push("/forbiddenRequest"))})))}))},a.handleInputChange=function(e){console.log("on change of textarea title od announce..."),console.log(e.target.name),console.log(e.target.value),a.setState(m({},e.target.name,e.target.value))},h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){document.title="Add Announcement | "+p.default.PageTitle;var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return s.default.createElement("div",null,s.default.createElement(c.default,{propertyProps:this.props}),s.default.createElement(l.Form,{onSubmit:this.handleSubmit_AddAnnouncement},s.default.createElement(l.Card,{className:"cardcss",title:s.default.createElement("b",null,"Announcements:Add"),extra:s.default.createElement(l.Button,{href:"/manageAnnouncement",type:"primary"},"Back")},s.default.createElement(l.Card,{type:"inner",headStyle:{backgroundColor:"rgb(255,255,255)"},title:s.default.createElement(b,a({},t,{label:"Title : "}),e("announcementTitle",{rules:[{required:!0,message:p.default.AnnouncementTitleValidation}]})(s.default.createElement(l.Input,{name:"announcementTitle",onChange:this.handleInputChange,setfieldsvalue:this.state.announcementTitle})))},s.default.createElement(b,a({},t,{label:"Description : "}),e("announcementDescription",{rules:[{required:!0,message:p.default.AnnouncementDescValidation},{max:5e3,message:p.default.MaxLengthDescriptionValidation}]})(s.default.createElement(g,{name:"announcementDescription",setfieldsvalue:this.state.announcementDescription,onChange:this.handleInputChange,style:{height:200,backgroundColor:"transparent"}}))),s.default.createElement(b,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},s.default.createElement(l.Button,{href:"/manageAnnouncement"},"Cancel"),s.default.createElement(l.Button,{type:"primary",htmlType:"submit",disabled:this.state.disableSubmit},"Submit"))))))}}]),t}(r.Component),v=l.Form.create()(y);t.default=v}}]);