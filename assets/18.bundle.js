(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1287:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReviewProposalReviewer=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),n=a(0),r=f(n),s=a(21),i=a(36),u=f(a(29)),d=f(a(197)),c=f(a(46));a(37);var p=f(a(1340));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=void 0,y=s.Modal.error,v=s.Form.Item,b=s.Select,E=s.Input.TextArea,g=[{title:r.default.createElement("div",{style:{fontSize:14}},r.default.createElement("b",null,"Title")),dataIndex:"title",key:"title",ellipsis:!0,width:"50%"},{title:r.default.createElement("div",{style:{fontSize:14}},r.default.createElement("b",null,"Status")),dataIndex:"status",key:"status",ellipsis:!0,width:"20%"},{title:r.default.createElement("div",{style:{fontSize:14}},r.default.createElement("b",null,"Action")),dataIndex:"action",key:"action",width:"30%"}],w=t.ReviewProposalReviewer=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleFeedbackClicked=function(e,t){localStorage.setItem("ResearchTitle",t),a.props.history.push("/reviewForm?id="+e)},a.handleSelectRespond=function(e,t){a.setState({showModalOfRespond:!0,proposalId:e,proposalTitle:t})},a.handleSubmitRespond=function(e){e.preventDefault(),a.props.form.validateFields(["selectRespond"],(function(e,t){console.log("error********",e),console.log("value********",t),e||fetch(u.default.APIURL+"/responseByReviewer",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({proposalId:a.state.proposalId,response:a.state.selectedRespond,comment:a.state.commentsForRespond})}).then((function(e){return e.json()})).then((function(e){200===e.status?(console.log("response...............",e.assignedProposal),a.setState({loading:!1,showModalOfRespond:!1,disableSubmitButton:!1,data:e.internalUserData[0].assignedProposal}),i.toast.success(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1})):300===e.status?i.toast.error(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}):401===e.status?y({title:c.default.SessionExpired+e.message,content:"",onOk:function(){h.props.history.push("/signIn")}}):500===e.status?a.props.history.push("/serverError"):400===e.status?a.props.history.push("/badRequest"):403===e.status&&a.props.history.push("/forbiddenRequest")}))}))},a.handleCancel=function(){a.setState({showModalOfRespond:!1}),a.props.form.resetFields()},a.handleSelectChange=function(e){a.setState({selectedRespond:e,disableSubmitButton:!1})},a.handleChange=function(e){var t;a.setState((m(t={},e.target.name,e.target.value),m(t,"disableSubmitButton",!1),t))},a.state={data:[],proposalData:[],showModalOfRespond:!1,loading:!1,proposalTitle:"",proposalId:"",selectedRespond:"",disableSubmitButton:!0,commentsForRespond:""},h=a,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this,t=!0,a=!1,l=void 0;try{for(var o,n=["ResearchId","ResearchTitle"][Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var r=o.value;localStorage.removeItem(r)}}catch(e){a=!0,l=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw l}}fetch(u.default.APIURL+"/getAllProposal",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){200===t.status&&e.setState({proposalData:t.proposalData})})),fetch(u.default.APIURL+"/getAllProposalForReviewer",{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include"}).then((function(e){return e.json()})).then((function(t){200===t.status?(console.log("response...............",t.assignedProposal),e.setState({data:t.assignedProposal})):300===t.status?i.toast.error(t.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}):401===t.status?y({title:c.default.SessionExpired+t.message,content:"",onOk:function(){h.props.history.push("/signIn")}}):500===t.status?e.props.history.push("/serverError"):400===t.status?e.props.history.push("/badRequest"):403===t.status&&e.props.history.push("/forbiddenRequest")}))}},{key:"renderTableData",value:function(){var e=this,t=this.state.data;return t&&t.map((function(t,a){return{key:t.proposalId,title:t.proposalTitle,status:"submitted",action:[r.default.createElement("a",{href:"/viewProposal?id="+t.proposalId},r.default.createElement(s.Tooltip,{placement:"top",title:"View proposal"},r.default.createElement(s.Icon,{style:{fontSize:"17px",color:""},type:"eye"}))),r.default.createElement(s.Divider,{style:{backgroundColor:"grey"},type:"vertical"}),r.default.createElement(s.Tooltip,{title:"Respond"},void 0===t.isProposalAcceptedForReview?r.default.createElement(s.Icon,{type:"export",style:{fontSize:"17px",color:"#1890FF"},onClick:function(){return e.handleSelectRespond(t.proposalId,t.proposalTitle)}}):r.default.createElement(s.Icon,{type:"export",style:{color:"grey",fontSize:"17px"}})),r.default.createElement(s.Divider,{style:{backgroundColor:"grey"},type:"vertical"}),r.default.createElement(s.Tooltip,{title:"Feedback"},"true"===t.isProposalAcceptedForReview&&void 0===t.isReviewSubmitted?r.default.createElement(s.Icon,{type:"form",style:{fontSize:"17px",color:"#1890FF"},onClick:function(){return e.handleFeedbackClicked(t.proposalId,t.proposalTitle)}}):r.default.createElement(s.Icon,{type:"form",style:{color:"grey",fontSize:"17px"}}))],description:r.default.createElement(p.default,{proposalId:t.proposalId,proposalData:e.state.proposalData})}}))}},{key:"render",value:function(){var e=this;document.title="Review Proposal | "+c.default.PageTitle;var t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:10}}};return console.log("+++++++++++++++++++++++++++++++",this.state.investigatorData),r.default.createElement("div",null,r.default.createElement(d.default,{propertyProps:this.props}),r.default.createElement(s.Card,{className:"cardcss",title:r.default.createElement("b",null,"Proposals For Review")},r.default.createElement(s.Table,{className:"gx-table-responsive",columns:g,expandedRowRender:function(e){return r.default.createElement("p",{style:{margin:0}},e.description)},dataSource:this.renderTableData()}),r.default.createElement(s.Modal,{visible:this.state.showModalOfRespond,title:r.default.createElement(s.Tooltip,{title:this.state.proposalTitle},r.default.createElement("span",{style:{display:"inline-block",width:"400px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},"Respond (Title : "+this.state.proposalTitle+")")),onOk:function(){return e.handleSubmitRespond(e.state.proposalId)},onCancel:this.handleCancel,footer:[r.default.createElement(s.Button,{key:"back",onClick:this.handleCancel},"Cancel"),r.default.createElement(s.Button,{key:"submit",type:"primary",loading:this.state.loading,onClick:function(t){return e.handleSubmitRespond(t,e.state.proposalId)}},"Submit")]},r.default.createElement(s.Form,null,r.default.createElement(v,l({},a,{label:"Select response"}),t("selectRespond",{rules:[{required:!0,message:c.default.selectRespondType}]})(r.default.createElement(s.Select,{name:"selectedRespond",setFieldsValue:this.state.selectedRespond,placeholder:"Please select respond",onChange:this.handleSelectChange,style:{width:"273px"}},r.default.createElement(b,{value:"true"},"Accept"),r.default.createElement(b,{value:"false"},"Reject")))),r.default.createElement(v,l({label:"Comments"},a),t("commentsForRespond",{})(r.default.createElement(E,{name:"commentsForRespond",setFieldsValue:this.state.commentsForRespond,onChange:this.handleChange,rows:4,cols:30,placeholder:"Please input your comment"})))))))}}]),t}(n.Component),k=s.Form.create()(w);t.default=k},1340:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataForDescriptionReview=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(0),n=s(o),r=s(a(3));function s(e){return e&&e.__esModule?e:{default:e}}var i=t.DataForDescriptionReview=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){console.log("*************proposalData"),console.log(this.props.proposalData),console.log(this.props.proposalId);var e=this.props.proposalData,t=this.props.proposalId,a=e.filter((function(e){return e.proposalId===t}));return console.log(a),n.default.createElement("div",null,a.map((function(e){var t=(0,r.default)(e.startDate).format("DD-MM-YYYY"),a=(0,r.default)(e.endDate).format("DD-MM-YYYY");return n.default.createElement("div",null,n.default.createElement("div",{style:{display:"flex",marginBottom:"1.5%"}},n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"First name : "),e&&void 0===e.investigator.firstName?n.default.createElement("span",null," N/A"):e.investigator.firstName)),n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Last name : "),void 0===e.investigator.lastName?n.default.createElement("span",null," N/A"):e.investigator.lastName))),n.default.createElement("div",{style:{display:"flex",marginBottom:"1.5%"}},n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Background : "),void 0===e.background?n.default.createElement("span",null," N/A"):e.background)),n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Expected outcome : "),void 0===e.expectedOutcomes?n.default.createElement("span",null," N/A"):e.expectedOutcomes))),n.default.createElement("div",{style:{display:"flex",marginBottom:"1.5%"}},n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Start date : ")," ",void 0===e.startDate?n.default.createElement("span",null," N/A"):t)),n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"End date : ")," ",void 0===e.endDate?n.default.createElement("span",null," N/A"):a))),n.default.createElement("div",{style:{display:"flex",marginBottom:"1.5%"}},n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Keyword : ")," ",void 0===e.keywords?n.default.createElement("span",null," N/A"):e.keywords)),n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Involves human subject : ")," ",void 0===e.humanSubjects?n.default.createElement("span",null," N/A"):!0===e.humanSubjects?"Yes":!1===e.humanSubjects?"No":e.humanSubjects))),n.default.createElement("div",{style:{display:"flex",marginBottom:"1.5%"}},n.default.createElement("div",{style:{width:"50%"}}," ",n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Amount : ")," ",n.default.createElement("label",{value:"FJ"},"FJ$ "),void 0===e.amount?n.default.createElement("span",null," N/A"):e.amount)),n.default.createElement("div",{style:{width:"50%"}},n.default.createElement("span",{style:{wordBreak:"break-all"}},n.default.createElement("b",null,"Level of risk involved : ")," ",void 0===e.levelRisk?n.default.createElement("span",null," N/A"):e.levelRisk))))})))}}]),t}(o.Component);t.default=i}}]);