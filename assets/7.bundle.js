(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnouncementCoordinator=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),r=f(a),s=n(21),l=f(n(3)),i=n(36),u=f(n(29)),c=f(n(197)),d=f(n(46));n(37);var p=f(n(1341));function f(e){return e&&e.__esModule?e:{default:e}}var h=s.Input.Search,m=(s.Input.TextArea,[{title:r.default.createElement("div",{style:{fontSize:"14"}},r.default.createElement("b",null,"Title")),dataIndex:"title",key:"title",ellipsis:!0,width:"50%"},{title:r.default.createElement("div",{style:{fontSize:"14"}},r.default.createElement("b",null,"Created On")),dataIndex:"createdat",key:"createdat"},{title:r.default.createElement("div",{style:{fontSize:"14"}},r.default.createElement("b",null,"Status")),dataIndex:"status",key:"status"},{title:r.default.createElement("div",{style:{fontSize:"14"}},r.default.createElement("b",null,"Action")),dataIndex:"action",key:"action"}]),y=t.AnnouncementCoordinator=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEdit_Announcement=function(e){n.props.history.push("/editAnnouncement?id="+e)},n.handleDelete_Announcement=function(e,t){console.log("on delete selected announcement",e),n.setState({showModalToDeleteAnnouncement:!0,uid:e,title:t})},n.getAnnouncementsData=function(){var e=n.state.pageNumber;fetch(u.default.APIURL+"/announcements/"+e,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){200===e.status?n.setState({data:e.announcementData,totalAnnouncements:e.totalAnnouncements}):300===e.status?i.toast.error(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}):401===e.status?error({title:d.default.SessionExpired+e.message,content:"",onOk:function(){that.props.history.push("/signIn")}}):500===e.status?n.props.history.push("/serverError"):400===e.status?n.props.history.push("/badRequest"):403===e.status&&n.props.history.push("/forbiddenRequest")}))},n.onSearchChange=function(e){""===e.target.value&&n.getAnnouncementsData()},n.onCustomSearch=function(e){console.log("search value ****",e),n.setState({searchValue:e}),fetch(u.default.APIURL+"/searchAnnouncements/"+e,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){200===e.status?n.setState({data:e.announcementData}):300===e.status?i.toast.error(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}):401===e.status?error({title:d.default.SessionExpired+e.message,content:"",onOk:function(){that.props.history.push("/signIn")}}):500===e.status?n.props.history.push("/serverError"):400===e.status?n.props.history.push("/badRequest"):403===e.status&&n.props.history.push("/forbiddenRequest")}))},n.handleOk_DeleteAnnouncement=function(){console.log(n.state.uid),n.setState({disabledDeleteButton:!0}),fetch(u.default.APIURL+"/announcements/"+n.state.uid,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){200===e.status?(n.setState({showModalToDeleteAnnouncement:!1,disabledDeleteButton:!1}),n.props.history.push("/manageAnnouncement"),i.toast.success(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1})):300===e.status?(n.setState({disabledDeleteButton:!1}),i.toast.error(d.default.ErrorInDeleteAnnouncement,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1})):401===e.status?(n.setState({disabledDeleteButton:!1}),error({title:d.default.SessionExpired+e.message,content:"",onOk:function(){that.props.history.push("/signIn")}})):500===e.status?(n.setState({disabledDeleteButton:!1}),i.toast.error(d.default.ErrorInDeleteAnnouncement,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),n.props.history.push("/serverError")):400===e.status?(n.setState({disabledDeleteButton:!1}),i.toast.error(d.default.ErrorInDeleteAnnouncement,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),n.props.history.push("/badRequest")):403===e.status&&(n.setState({disabledDeleteButton:!1}),i.toast.error(d.default.ErrorInDeleteAnnouncement,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}),n.props.history.push("/forbiddenRequest"))}))},n.handleCancel_DeleteAnnouncement=function(){n.setState({showModalToDeleteAnnouncement:!1})},n.state={searchValue:"",data:[],showModalToDeleteAnnouncement:!1,uid:null,title:"",disabledDeleteButton:!1,pageNumber:1,totalAnnouncements:null,pageSize:10},n.onChangeOfpagination=n.onChangeOfpagination.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"onChangeOfpagination",value:function(e){var t=this;console.log("in pn change of pagination"),console.log(e),this.setState({pageNumber:e}),fetch(u.default.APIURL+"/announcements/"+e,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){200===e.status?t.setState({data:e.announcementData}):300===e.status?i.toast.error(e.message,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1}):500===e.status?t.props.history.push("/serverError"):400===e.status?t.props.history.push("/badRequest"):403===e.status&&t.props.history.push("/forbiddenRequest")}))}},{key:"componentDidMount",value:function(){console.log("on delete uid****************",this.state.uid)}},{key:"componentWillMount",value:function(){this.getAnnouncementsData()}},{key:"renderTableData",value:function(){var e=this,t=this.state.data;return t&&t.map((function(t,n){var o=(0,l.default)(t.createdAt).format("DD-MM-YYYY");return{key:n,title:t.title,createdat:o,status:r.default.createElement(s.Tooltip,{placement:"top"},t.isActive?"Active":"In Active"),action:[r.default.createElement(s.Tooltip,{title:"Edit"},t.isActive?r.default.createElement(s.Icon,{onClick:function(){e.handleEdit_Announcement(t.uid)},type:"edit",style:{color:"#1890FF"}}):r.default.createElement(s.Icon,{type:"edit",style:{color:"grey"}})),r.default.createElement(s.Divider,{style:{backgroundColor:"grey"},type:"vertical"}),r.default.createElement(s.Tooltip,{title:"Delete"},t.isActive?r.default.createElement(s.Icon,{onClick:function(){e.handleDelete_Announcement(t.uid,t.title)},type:"delete",style:{color:"red"}}):r.default.createElement(s.Icon,{type:"delete",style:{color:"grey"}}))],description:r.default.createElement(p.default,{desc:t.content})}}))}},{key:"render",value:function(){var e=this;document.title="Manage Announcement | "+d.default.PageTitle;var t={showSizeChanger:!1,showQuickJumper:!1,pageSize:this.state.pageSize,current:this.state.pageNumber,total:this.state.totalAnnouncements,onChange:function(t){return e.onChangeOfpagination(t)}};return r.default.createElement("div",null,r.default.createElement(c.default,{propertyProps:this.props}),r.default.createElement(s.Card,{className:"cardcss",title:r.default.createElement("b",null,"Announcements"),extra:r.default.createElement("div",null,r.default.createElement(h,{style:{marginRight:"40px",width:"300px"},placeholder:"Please input title here",onChange:this.onSearchChange,onSearch:this.onCustomSearch,enterButton:!0}),r.default.createElement(s.Button,{href:"/addAnnouncement",type:"primary"},"Add Announcement"))},r.default.createElement(s.Table,{expandedRowRender:function(e){return r.default.createElement("p",null,e.description)},columns:m,dataSource:this.renderTableData(),pagination:t}),r.default.createElement(s.Modal,{title:r.default.createElement("span",{style:{display:"inline-block",width:"400px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},"Title :   "+this.state.title),visible:this.state.showModalToDeleteAnnouncement,onOk:function(){return e.handleOk_DeleteAnnouncement},onCancel:this.handleCancel_DeleteAnnouncement,footer:[r.default.createElement(s.Button,{key:"back",onClick:this.handleCancel_DeleteAnnouncement},"Cancel"),r.default.createElement(s.Button,{key:"submit",type:"danger",disabled:this.state.disabledDeleteButton,onClick:this.handleOk_DeleteAnnouncement},"Delete")]},r.default.createElement("p",null,"Are you sure want to delete announcement?"))))}}]),t}(a.Component);t.default=y},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnouncementDescription=void 0;var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),s=(o=r)&&o.__esModule?o:{default:o};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=t.AnnouncementDescription=function(e){function t(){return l(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props.desc;return s.default.createElement("div",null,s.default.createElement("div",null,s.default.createElement("b",null,"Description : ")),s.default.createElement("div",{style:{marginTop:"3px",width:"100%"}},e))}}]),t}(r.Component);t.default=u}}]);